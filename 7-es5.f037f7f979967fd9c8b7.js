!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{AkKA:function(e,n,c){"use strict";c.r(n),c.d(n,"TicketsModule",(function(){return S}));var a,r=c("bTqV"),o=c("Wp6s"),u=c("qFsG"),s=c("ofXK"),b=c("tyNb"),l=c("IzEk"),p=c("fXoL"),d=c("AytR"),f=c("tk/3"),h=((a=function(){function e(i){t(this,e),this.httpClient=i,this.TICKET_URL=d.a+"/trips/findOneTrip"}return i(e,[{key:"searchForTrip",value:function(t){return this.httpClient.get(this.TICKET_URL+"?code="+t)}}]),e}()).\u0275fac=function(t){return new(t||a)(p.Tb(f.a))},a.\u0275prov=p.Gb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),k=c("3Pt+"),m=c("kmnG"),y=c("kWLz"),O=c("7EHt");function P(t,e){if(1&t&&(p.Pb(0,"mat-accordion"),p.Pb(1,"mat-expansion-panel"),p.Pb(2,"mat-expansion-panel-header"),p.Pb(3,"mat-panel-title"),p.tc(4),p.Ob(),p.Ob(),p.Pb(5,"ul",2),p.Pb(6,"li",3),p.tc(7,"Z: "),p.Pb(8,"b"),p.tc(9),p.Ob(),p.Ob(),p.Pb(10,"li",3),p.tc(11,"Wylot: "),p.Pb(12,"b"),p.tc(13),p.Pb(14,"sup"),p.tc(15),p.Ob(),p.Ob(),p.Ob(),p.Pb(16,"li",3),p.tc(17,"Do: "),p.Pb(18,"b"),p.tc(19),p.Ob(),p.Ob(),p.Pb(20,"li",3),p.tc(21,"Przylot: "),p.Pb(22,"b"),p.tc(23),p.Pb(24,"sup"),p.tc(25),p.Ob(),p.Ob(),p.Ob(),p.Pb(26,"li",3),p.tc(27,"Linia lotnicza: "),p.Pb(28,"b"),p.tc(29),p.Ob(),p.Ob(),p.Pb(30,"li",3),p.tc(31,"Nr miejsca: "),p.Pb(32,"b"),p.tc(33),p.Ob(),p.Ob(),p.Pb(34,"li",3),p.tc(35,"Cena biletu: "),p.Pb(36,"b"),p.tc(37),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.Ob()),2&t){var i=e.$implicit,n=e.index,c=p.ac();p.Ab(4),p.xc("Lot nr. ",c.ticket.arraysTicket[n].flightDto.id,", miejsce ",c.ticket.arraysTicket[n].seatNumber,", ",i.srcPlace,""),p.Ab(5),p.uc(i.srcPlace),p.Ab(4),p.wc("",i.departureDate,", ",i.departureTime,""),p.Ab(2),p.uc(i.departureTimezone),p.Ab(4),p.uc(i.dstPlace),p.Ab(4),p.wc("",i.arrivalDate,", ",i.arrivalTime,""),p.Ab(2),p.uc(i.arrivalTimezone),p.Ab(4),p.uc(i.airline),p.Ab(4),p.uc(c.ticket.arraysTicket[n].seatNumber),p.Ab(4),p.uc(c.ticket.arraysTicket[n].totalPrice)}}var v,g=((v=function(){function e(i){t(this,e),this.viewDataService=i}return i(e,[{key:"ngOnChanges",value:function(){this.mapTicketToViewData()}},{key:"mapTicketToViewData",value:function(){this.viewData=this.viewDataService.toViewData(this.ticket)}}]),e}()).\u0275fac=function(t){return new(t||v)(p.Kb(y.a))},v.\u0275cmp=p.Eb({type:v,selectors:[["app-ticket"]],inputs:{ticket:"ticket"},features:[p.yb],decls:8,vars:3,consts:[[1,"title"],[4,"ngFor","ngForOf"],[1,"interFlightWrapper"],[1,"interFlightRow"]],template:function(t,e){1&t&&(p.Pb(0,"mat-card"),p.Pb(1,"mat-card-header"),p.Pb(2,"div",0),p.tc(3,"Lista bilet\xf3w"),p.Ob(),p.Ob(),p.Pb(4,"mat-card-subtitle"),p.tc(5),p.Ob(),p.Pb(6,"mat-card-content"),p.rc(7,P,38,14,"mat-accordion",1),p.Ob(),p.Ob()),2&t&&(p.Ab(5),p.wc(" Data rezerwacji: ",e.ticket.purchaseDate,", ",e.ticket.purchaseTime," "),p.Ab(2),p.fc("ngForOf",e.viewData.flights))},directives:[o.a,o.d,o.f,o.c,s.j,O.a,O.c,O.d,O.e],styles:[".mat-card[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(i){font-family:Source Code Pro,monospace!important}.mat-card[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;text-align:center;font-size:1.5rem}.mat-card-subtitle[_ngcontent-%COMP%]{margin:1vh 4vw;font-size:1.1rem}.mat-card-content[_ngcontent-%COMP%]{margin:0 5vw}.mat-expansion-panel[_ngcontent-%COMP%]{margin:1vh 0}"]}),v);function T(t,e){if(1&t&&p.Lb(0,"app-ticket",5),2&t){var i=p.ac();p.fc("ticket",i.ticket)}}var w,C,F,A=function(){return{standalone:!0}},D=[{path:"",component:(w=function(){function e(i,n){t(this,e),this.ticketHttp=i,this.route=n,this.tripCodeSearchQuery=""}return i(e,[{key:"ngOnInit",value:function(){this.subscribeToRouteParams()}},{key:"onSearch",value:function(){this.fetchTrip()}},{key:"shouldDisplayTicketDetails",value:function(){return this.isTicketFound}},{key:"fetchTrip",value:function(){this.ticketHttp.searchForTrip(this.tripCodeSearchQuery).pipe(Object(l.a)(1)).subscribe(this.onFoundTicket(),this.onFailedFetchedTicket())}},{key:"subscribeToRouteParams",value:function(){this.route.queryParams.pipe(Object(l.a)(1)).subscribe(this.searchForReservedTripBasedOnQueryParams())}},{key:"searchForReservedTripBasedOnQueryParams",value:function(){var t=this;return function(e){t.extractTripCodeFromUrl(e),t.tripCodeSearchQuery&&t.fetchTrip()}}},{key:"extractTripCodeFromUrl",value:function(t){var e;this.tripCodeSearchQuery=null!==(e=t.code)&&void 0!==e?e:""}},{key:"onFoundTicket",value:function(){var t=this;return function(e){console.log("received ticket: ",e),t.ticket=e,t.onSuccessfullyFetchedTicket()}}},{key:"onFailedFetchedTicket",value:function(){var t=this;return function(e){console.error(e),t.manageFlagOnFailure()}}},{key:"manageFlagOnFailure",value:function(){this.isTicketFound=!1}},{key:"onSuccessfullyFetchedTicket",value:function(){this.isTicketFound=!0}}]),e}(),w.\u0275fac=function(t){return new(t||w)(p.Kb(h),p.Kb(b.a))},w.\u0275cmp=p.Eb({type:w,selectors:[["app-tickets"]],decls:12,vars:5,consts:[[1,"search-input-wrapper"],[1,"search-code-input"],["matInput","","type","text",3,"ngModel","ngModelOptions","ngModelChange"],["mat-button","","color","primary","type","submit",3,"disabled","click"],[3,"ticket",4,"ngIf"],[3,"ticket"]],template:function(t,e){1&t&&(p.Pb(0,"mat-card",0),p.Pb(1,"form"),p.Pb(2,"mat-card-title"),p.tc(3,"Podaj kod zarezerwowanej podr\xf3\u017cy lotniczej:"),p.Ob(),p.Pb(4,"mat-form-field",1),p.Pb(5,"mat-label"),p.tc(6,"kod podr\xf3\u017cy"),p.Ob(),p.Pb(7,"input",2),p.Wb("ngModelChange",(function(t){return e.tripCodeSearchQuery=t})),p.Ob(),p.Ob(),p.Pb(8,"mat-card-actions"),p.Pb(9,"button",3),p.Wb("click",(function(){return e.onSearch()})),p.tc(10,"Szukaj "),p.Ob(),p.Ob(),p.Ob(),p.Ob(),p.rc(11,T,1,1,"app-ticket",4)),2&t&&(p.Ab(7),p.fc("ngModel",e.tripCodeSearchQuery)("ngModelOptions",p.gc(4,A)),p.Ab(2),p.fc("disabled",!e.tripCodeSearchQuery.length),p.Ab(2),p.fc("ngIf",e.shouldDisplayTicketDetails()))},directives:[o.a,k.v,k.o,k.p,o.g,m.b,m.e,u.b,k.c,k.n,k.q,o.b,r.a,s.k,g],styles:[".search-input-wrapper[_ngcontent-%COMP%]{display:relative;width:50%;margin:0 auto}.search-code-input[_ngcontent-%COMP%]{width:80%}"]}),w)}],M=((F=function e(){t(this,e)}).\u0275mod=p.Ib({type:F}),F.\u0275inj=p.Hb({factory:function(t){return new(t||F)},imports:[[b.e.forChild(D)],b.e]}),F),S=((C=function e(){t(this,e)}).\u0275mod=p.Ib({type:C}),C.\u0275inj=p.Hb({factory:function(t){return new(t||C)},imports:[[s.c,M,k.j,u.c,o.e,r.b,O.b]]}),C)}}])}();